[1,["65X82mCfBJQqlYvfQJmLqV","12Y9dMgWdJKJGmTiZyQR9H@2e76e","b2iP6cSRpP36fT7/F3jr4Q@6c48a","9fUxqgWwJK563mDEMxRe+H@6c48a","a6jnHsc9JP459WlOqqMbSJ"],["node","root","data","_mesh","mainTexture","BoxTexture","_effectAsset"],[["cc.Node",["_name","_components","_prefab","_children","_parent","_lscale"],2,9,4,2,1,5],["cc.Mesh",["_native","_hash","_struct"],1,11],["cc.Prefab",["_name"],2],["cc.BoxCollider",["_isTrigger","node","__prefab"],2,1,4],["cc.CompPrefabInfo",["fileId"],2],["cc.RigidBody",["_group","_type","node","__prefab"],1,1,4],["4186dshOpRF9IpLzik9xhoy",["upgradeGoldCounts","node","__prefab"],2,1,4],["cc.PrefabInfo",["fileId","instance","targetOverrides","nestedPrefabInstanceRoots","root","asset"],-1,1,1],["cc.MeshRenderer",["_name","node","__prefab","_materials","bakeSettings","_mesh"],2,1,4,3,4,6],["cc.ModelBakeSettings",[],3],["cc.Material",["_name","_techIdx","_states","_defines","_props"],-1,12],["cc.EffectAsset",["_name","shaders","techniques"],0]],[[4,0,2],[7,0,1,2,3,4,5,5],[1,0,1,2,3],[2,0,2],[0,0,3,1,2,2],[0,0,4,1,2,5,2],[3,0,1,2,2],[5,0,1,2,3,3],[6,0,1,2,2],[8,0,1,2,3,4,5,2],[9,1],[10,0,1,2,3,4,5],[11,0,1,2,4]],[[[[2,".bin",2489017538,[{"primitives":[{"primitiveMode":7,"vertexBundelIndices":[0],"indexView":{"offset":6776,"length":1200,"count":600,"stride":2}}],"vertexBundles":[{"view":{"offset":0,"length":6776,"count":121,"stride":56},"attributes":[{"name":"a_position","format":32,"isNormalized":false},{"name":"a_normal","format":32,"isNormalized":false},{"name":"a_texCoord","format":21,"isNormalized":false},{"name":"a_tangent","format":44,"isNormalized":false},{"name":"a_texCoord1","format":21,"isNormalized":false}]}]},"minPosition",8,[1,-5,0,-5],"maxPosition",8,[1,5,0,5]]],-1],0,0,[],[],[]],[[[3,"Place gold coins"],[4,"Place gold coins",[-5],[[6,true,-2,[0,"01cbH0q5JBtowzpzwqp4dh"]],[7,32,2,-3,[0,"6aTgRmwQRPsJ78NPqFRV99"]],[8,[10,20,30],-4,[0,"d7YR+k81FEZZtPFl62nc+w"]]],[1,"c46/YsCPVOJYA4mWEpNYRx",null,null,null,-1,0]],[5,"Plane-001",1,[[9,"Plane<ModelComponent>",-6,[0,"39vqF5bJlGCooRSX03/MzY"],[0],[10],1]],[1,"1cIMOsmHNBL7mFMaOmMgYB",null,null,null,1,0],[1,0.1,0.1,0.1]]],0,[0,1,1,0,0,1,0,0,1,0,0,1,0,-1,2,0,0,2,0,2,1,6],[0,0],[-1,3],[0,1]],[[[11,"M_NumBox",1,[{"rasterizerState":{},"depthStencilState":{},"blendState":{"targets":[{}]}},{"rasterizerState":{},"depthStencilState":{},"blendState":{"targets":[{}]}}],[{},{}],[[[{"MaxNum":25,"ReadNum":25,"NumHeight":1,"NumWidth":0.75},"tintColor",8,[4,2164260863],"mainTexture",6,0,"BoxTexture",6,1],{}],11,0]]],0,0,[0,0,0],[4,5,6],[2,3,4]],[[[12,"MAT/UI/NumBox/MAT/particle_New_NumBoxTex02",[{"hash":1968122416,"name":"MAT/UI/NumBox/MAT/particle_New_NumBoxTex02|vert:vs_main|Num-fs:Num","blocks":[{"name":"Constants","stageFlags":1,"binding":0,"members":[{"name":"mainTiling_Offset","type":16,"count":1},{"name":"frameTile_velLenScale","type":16,"count":1},{"name":"scale","type":16,"count":1},{"name":"nodeRotation","type":16,"count":1}],"defines":[]},{"name":"builtin","stageFlags":1,"binding":1,"members":[{"name":"cc_size_rotation","type":16,"count":1}],"defines":[]},{"name":"FragConstants","stageFlags":16,"binding":2,"members":[{"name":"tintColor","type":16,"count":1},{"name":"FullColor","type":16,"count":1}],"defines":[]},{"name":"ClipNum","stageFlags":16,"binding":3,"members":[{"name":"NumBaseSize","type":13,"count":1},{"name":"MaxDigit","type":13,"count":1},{"name":"MaxNum","type":13,"count":1},{"name":"ReadNum","type":13,"count":1},{"name":"NumHeight","type":13,"count":1},{"name":"NumWidth","type":13,"count":1},{"name":"LifeBoxSize","type":13,"count":1}],"defines":[]}],"samplerTextures":[{"name":"mainTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":4,"defines":[]},{"name":"BoxTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":5,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[],"attributes":[{"name":"a_position","format":32,"location":0,"defines":[]},{"name":"a_texCoord","format":21,"location":1,"defines":[]},{"name":"a_color","format":44,"location":2,"defines":[]}],"fragColors":[{"name":"cc_FragColor","typename":"vec4","type":16,"count":1,"stageFlags":16,"location":0,"defines":[]}],"descriptors":[{"rate":0,"blocks":[{"name":"CCLocal","stageFlags":1,"tags":{"builtin":"local"},"members":[{"name":"cc_matWorld","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matWorldIT","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_lightingMapUVParam","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_localShadowBias","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_reflectionProbeData1","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_reflectionProbeData2","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_reflectionProbeBlendData1","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_reflectionProbeBlendData2","typename":"vec4","type":16,"count":1,"precision":"highp "}],"defines":[]}],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":1,"blocks":[{"name":"Constants","stageFlags":1,"binding":0,"members":[{"name":"mainTiling_Offset","type":16,"count":1},{"name":"frameTile_velLenScale","type":16,"count":1},{"name":"scale","type":16,"count":1},{"name":"nodeRotation","type":16,"count":1}],"defines":[]},{"name":"builtin","stageFlags":1,"binding":1,"members":[{"name":"cc_size_rotation","type":16,"count":1}],"defines":[]},{"name":"FragConstants","stageFlags":16,"binding":2,"members":[{"name":"tintColor","type":16,"count":1},{"name":"FullColor","type":16,"count":1}],"defines":[]},{"name":"ClipNum","stageFlags":16,"binding":3,"members":[{"name":"NumBaseSize","type":13,"count":1},{"name":"MaxDigit","type":13,"count":1},{"name":"MaxNum","type":13,"count":1},{"name":"ReadNum","type":13,"count":1},{"name":"NumHeight","type":13,"count":1},{"name":"NumWidth","type":13,"count":1},{"name":"LifeBoxSize","type":13,"count":1}],"defines":[]}],"samplerTextures":[{"name":"mainTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":4,"defines":[]},{"name":"BoxTexture","type":28,"count":1,"stageFlags":16,"sampleType":0,"binding":5,"defines":[]}],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":2,"blocks":[],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]},{"rate":3,"blocks":[{"name":"CCGlobal","stageFlags":17,"tags":{"builtin":"global"},"members":[{"name":"cc_time","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_screenSize","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_nativeSize","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_probeInfo","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_debug_view_mode","typename":"vec4","type":16,"count":1,"precision":"mediump "}],"defines":[]},{"name":"CCCamera","stageFlags":17,"tags":{"builtin":"global"},"members":[{"name":"cc_matView","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matViewInv","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matProj","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matProjInv","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matViewProj","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_matViewProjInv","typename":"mat4","type":25,"count":1,"precision":"highp "},{"name":"cc_cameraPos","typename":"vec4","type":16,"count":1,"precision":"highp "},{"name":"cc_surfaceTransform","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_screenScale","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_exposure","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_mainLitDir","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_mainLitColor","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_ambientSky","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_ambientGround","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_fogColor","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_fogBase","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_fogAdd","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_nearFar","typename":"vec4","type":16,"count":1,"precision":"mediump "},{"name":"cc_viewPort","typename":"vec4","type":16,"count":1,"precision":"mediump "}],"defines":[]}],"samplerTextures":[],"samplers":[],"textures":[],"buffers":[],"images":[],"subpassInputs":[]}],"glsl3":{"vert":"\nprecision mediump float;\nlayout(std140) uniform Constants {\n  vec4 mainTiling_Offset;\n  vec4 frameTile_velLenScale;\n  vec4 scale;\n  vec4 nodeRotation;\n};\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n  mediump vec4 cc_probeInfo;\n  mediump vec4 cc_debug_view_mode;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_surfaceTransform;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(std140) uniform CCLocal {\n  highp mat4 cc_matWorld;\n  highp mat4 cc_matWorldIT;\n  highp vec4 cc_lightingMapUVParam;\n  highp vec4 cc_localShadowBias;\n  highp vec4 cc_reflectionProbeData1;\n  highp vec4 cc_reflectionProbeData2;\n  highp vec4 cc_reflectionProbeBlendData1;\n  highp vec4 cc_reflectionProbeBlendData2;\n};\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nout mediump vec2 uv;\nout mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n  , mat4 viewInv\n) {\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nin vec3 a_position;\nin vec2 a_texCoord;\nin vec4 a_color;\nlayout(std140) uniform builtin {\n  vec4 cc_size_rotation;\n};\nvec4 vs_main() {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matWorld * pos;\n  vec2 vertOffset = a_texCoord.xy - 0.5;\n  computeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\n  pos = cc_matViewProj * pos;\n  uv = a_texCoord.xy;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vs_main(); }","frag":"\nprecision mediump float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n  mediump vec4 cc_probeInfo;\n  mediump vec4 cc_debug_view_mode;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_surfaceTransform;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nvec4 CCFragOutput (vec4 color) {\n  return color;\n}\nvec4 CCSampleWithAlphaSeparated(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\n  return vec4(texture(tex, uv).rgb, texture(tex, uv + vec2(0.0, 0.5)).r);\n#else\n  return texture(tex, uv);\n#endif\n}\nin vec2 uv;\nin vec4 color;\nuniform sampler2D mainTexture;\nuniform sampler2D BoxTexture;\nlayout(std140) uniform FragConstants {\n  vec4 tintColor;\n  vec4 FullColor;\n};\nlayout(std140) uniform ClipNum {\n  float NumBaseSize;\n  float MaxDigit;\n  float MaxNum;\n  float ReadNum;\n  float NumHeight;\n  float NumWidth;\n  float LifeBoxSize;\n};\nvec4 Num () {\n  float C = 1.0;\n  C += step(9.5,ReadNum);\n  C += step(99.5,ReadNum);\n  C += step(999.5,ReadNum);\n  C += step(9999.5,ReadNum);\n  C += step(99999.5,ReadNum);\n  C += step(999999.5,ReadNum);\n  C += step(9999999.5,ReadNum);\n  float ViewNum = C;\n  vec2 UVScale = clamp(((uv - 0.5)*NumBaseSize) + 0.5 , 0.0, 1.0);\n  vec2 UV_Cill = vec2(UVScale.r*MaxDigit + ( ViewNum - mod(MaxDigit , 2.0) ) * 0.5, UVScale.g);\n  float CillNum = floor(UV_Cill.r)-((MaxDigit-1.0)*0.5);\n  vec2 NewUV = fract(UV_Cill);\n  NewUV.g = clamp(((NewUV.g - 0.5) * NumHeight) + 0.5, 0.0, 1.0);\n  NewUV.r = clamp(((NewUV.r - 0.5) * NumWidth) + 0.5, 0.0, 1.0);\n  float CillMask = 1.0;\n  if(CillNum < 0.0 || CillNum > ViewNum-0.25){\n    CillMask = 0.0;\n  }\n  else{\n    CillMask = 1.0;\n  }\n  float DigitNum = (ViewNum - 1.0 - CillNum + (1.0 - mod(MaxDigit , 2.0))*0.5);\n  float CillDigit = pow(10.0,DigitNum);\n  float ViewNumber = floor(ReadNum/CillDigit);\n  ViewNumber = fract(ViewNumber*0.1)*10.0;\n  NewUV.g = (NewUV.g * 0.1) + ViewNumber * 0.1;\n  vec4 MainTex = CCSampleWithAlphaSeparated(mainTexture, NewUV);\n  vec4 BoxTex = CCSampleWithAlphaSeparated(BoxTexture, uv);\n  BoxTex.r = pow(BoxTex.r , 5.0);\n  BoxTex.g = BoxTex.r;\n  BoxTex.b = BoxTex.r;\n  float ToFull = 0.0;\n  if(BoxTex.a>0.5 && BoxTex.a<0.505)\n  {\n    ToFull = 1.0*(1.0-MainTex.a*CillMask);\n  }\n  vec2 FullUV = clamp(((uv - 0.5)*LifeBoxSize) + 0.5 , 0.0, 1.0);\n  float MyLife = (MaxNum - ReadNum)/MaxNum;\n  float AniClip = 0.0;\n  if((1.0 - FullUV.g) - MyLife < 0.0)\n  {\n    AniClip = 1.0;\n  }\n  vec4 FullBoxColor = FullColor*AniClip;\n  vec4 FullBoxColorMask = FullBoxColor * vec4(ToFull,ToFull,ToFull,ToFull*0.25);\n  vec4 FinelColor = MainTex * vec4(MainTex.a, MainTex.a, MainTex.a, MainTex.a ) * vec4(CillMask, CillMask, CillMask, CillMask) +\n                    BoxTex * vec4(BoxTex.a, BoxTex.a, BoxTex.a, BoxTex.a) + FullBoxColorMask;\n  vec4 col = FinelColor * tintColor;\n  return CCFragOutput(col);\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = Num(); }"},"glsl1":{"vert":"\nprecision mediump float;\nuniform highp mat4 cc_matView;\n  uniform highp mat4 cc_matViewInv;\n  uniform highp mat4 cc_matViewProj;\nuniform highp mat4 cc_matWorld;\nvec4 quaternionFromAxis (vec3 xAxis,vec3 yAxis,vec3 zAxis){\n  mat3 m = mat3(xAxis,yAxis,zAxis);\n  float trace = m[0][0] + m[1][1] + m[2][2];\n  vec4 quat;\n  if (trace > 0.) {\n    float s = 0.5 / sqrt(trace + 1.0);\n    quat.w = 0.25 / s;\n    quat.x = (m[2][1] - m[1][2]) * s;\n    quat.y = (m[0][2] - m[2][0]) * s;\n    quat.z = (m[1][0] - m[0][1]) * s;\n  } else if ((m[0][0] > m[1][1]) && (m[0][0] > m[2][2])) {\n    float s = 2.0 * sqrt(1.0 + m[0][0] - m[1][1] - m[2][2]);\n    quat.w = (m[2][1] - m[1][2]) / s;\n    quat.x = 0.25 * s;\n    quat.y = (m[0][1] + m[1][0]) / s;\n    quat.z = (m[0][2] + m[2][0]) / s;\n  } else if (m[1][1] > m[2][2]) {\n    float s = 2.0 * sqrt(1.0 + m[1][1] - m[0][0] - m[2][2]);\n    quat.w = (m[0][2] - m[2][0]) / s;\n    quat.x = (m[0][1] + m[1][0]) / s;\n    quat.y = 0.25 * s;\n    quat.z = (m[1][2] + m[2][1]) / s;\n  } else {\n    float s = 2.0 * sqrt(1.0 + m[2][2] - m[0][0] - m[1][1]);\n    quat.w = (m[1][0] - m[0][1]) / s;\n    quat.x = (m[0][2] + m[2][0]) / s;\n    quat.y = (m[1][2] + m[2][1]) / s;\n    quat.z = 0.25 * s;\n  }\n  float len = quat.x * quat.x + quat.y * quat.y + quat.z * quat.z + quat.w * quat.w;\n  if (len > 0.) {\n    len = 1. / sqrt(len);\n    quat.x = quat.x * len;\n    quat.y = quat.y * len;\n    quat.z = quat.z * len;\n    quat.w = quat.w * len;\n  }\n  return quat;\n}\nvec4 quaternionFromEuler (vec3 angle){\n  float x = angle.x / 2.;\n  float y = angle.y / 2.;\n  float z = angle.z / 2.;\n  float sx = sin(x);\n  float cx = cos(x);\n  float sy = sin(y);\n  float cy = cos(y);\n  float sz = sin(z);\n  float cz = cos(z);\n  vec4 quat = vec4(0);\n  quat.x = sx * cy * cz + cx * sy * sz;\n  quat.y = cx * sy * cz + sx * cy * sz;\n  quat.z = cx * cy * sz - sx * sy * cz;\n  quat.w = cx * cy * cz - sx * sy * sz;\n  return quat;\n}\nvec4 quatMultiply (vec4 a, vec4 b){\n  vec4 quat;\n  quat.x = a.x * b.w + a.w * b.x + a.y * b.z - a.z * b.y;\n  quat.y = a.y * b.w + a.w * b.y + a.z * b.x - a.x * b.z;\n  quat.z = a.z * b.w + a.w * b.z + a.x * b.y - a.y * b.x;\n  quat.w = a.w * b.w - a.x * b.x - a.y * b.y - a.z * b.z;\n  return quat;\n}\nvoid rotateVecFromQuat (inout vec3 v, vec4 q){\n  float ix = q.w * v.x + q.y * v.z - q.z * v.y;\n  float iy = q.w * v.y + q.z * v.x - q.x * v.z;\n  float iz = q.w * v.z + q.x * v.y - q.y * v.x;\n  float iw = -q.x * v.x - q.y * v.y - q.z * v.z;\n  v.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  v.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  v.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n}\nvec3 rotateInLocalSpace (vec3 pos, vec3 xAxis, vec3 yAxis, vec3 zAxis, vec4 q){\n  vec4 viewQuat = quaternionFromAxis(xAxis, yAxis, zAxis);\n  vec4 rotQuat = quatMultiply(viewQuat, q);\n  rotateVecFromQuat(pos, rotQuat);\n  return pos;\n}\nvarying mediump vec2 uv;\nvarying mediump vec4 color;\nvoid computeVertPos (inout vec4 pos, vec2 vertOffset, vec4 q, vec3 s\n  , mat4 viewInv\n) {\n  vec3 viewSpaceVert = vec3(vertOffset.x * s.x, vertOffset.y * s.y, 0.);\n  vec3 camX = normalize(vec3(viewInv[0][0], viewInv[1][0], viewInv[2][0]));\n  vec3 camY = normalize(vec3(viewInv[0][1], viewInv[1][1], viewInv[2][1]));\n  vec3 camZ = normalize(vec3(viewInv[0][2], viewInv[1][2], viewInv[2][2]));\n  pos.xyz += rotateInLocalSpace(viewSpaceVert, camX, camY, camZ, q);\n}\nattribute vec3 a_position;\nattribute vec2 a_texCoord;\nattribute vec4 a_color;\n   uniform vec4 cc_size_rotation;\nvec4 vs_main() {\n  vec4 pos = vec4(a_position, 1);\n  pos = cc_matWorld * pos;\n  vec2 vertOffset = a_texCoord.xy - 0.5;\n  computeVertPos(pos, vertOffset, quaternionFromEuler(vec3(0., 0., cc_size_rotation.z)), vec3(cc_size_rotation.xy, 0.), cc_matViewInv);\n  pos = cc_matViewProj * pos;\n  uv = a_texCoord.xy;\n  color = a_color;\n  return pos;\n}\nvoid main() { gl_Position = vs_main(); }","frag":"\nprecision mediump float;\nvec4 CCFragOutput (vec4 color) {\n  return color;\n}\nvec4 CCSampleWithAlphaSeparated(sampler2D tex, vec2 uv) {\n#if CC_USE_EMBEDDED_ALPHA\n  return vec4(texture2D(tex, uv).rgb, texture2D(tex, uv + vec2(0.0, 0.5)).r);\n#else\n  return texture2D(tex, uv);\n#endif\n}\nvarying vec2 uv;\nvarying vec4 color;\nuniform sampler2D mainTexture;\nuniform sampler2D BoxTexture;\n  uniform vec4 tintColor;\n  uniform vec4 FullColor;\n   uniform float NumBaseSize;\n   uniform float MaxDigit;\n   uniform float MaxNum;\n   uniform float ReadNum;\n   uniform float NumHeight;\n   uniform float NumWidth;\n   uniform float LifeBoxSize;\nvec4 Num () {\n  float C = 1.0;\n  C += step(9.5,ReadNum);\n  C += step(99.5,ReadNum);\n  C += step(999.5,ReadNum);\n  C += step(9999.5,ReadNum);\n  C += step(99999.5,ReadNum);\n  C += step(999999.5,ReadNum);\n  C += step(9999999.5,ReadNum);\n  float ViewNum = C;\n  vec2 UVScale = clamp(((uv - 0.5)*NumBaseSize) + 0.5 , 0.0, 1.0);\n  vec2 UV_Cill = vec2(UVScale.r*MaxDigit + ( ViewNum - mod(MaxDigit , 2.0) ) * 0.5, UVScale.g);\n  float CillNum = floor(UV_Cill.r)-((MaxDigit-1.0)*0.5);\n  vec2 NewUV = fract(UV_Cill);\n  NewUV.g = clamp(((NewUV.g - 0.5) * NumHeight) + 0.5, 0.0, 1.0);\n  NewUV.r = clamp(((NewUV.r - 0.5) * NumWidth) + 0.5, 0.0, 1.0);\n  float CillMask = 1.0;\n  if(CillNum < 0.0 || CillNum > ViewNum-0.25){\n    CillMask = 0.0;\n  }\n  else{\n    CillMask = 1.0;\n  }\n  float DigitNum = (ViewNum - 1.0 - CillNum + (1.0 - mod(MaxDigit , 2.0))*0.5);\n  float CillDigit = pow(10.0,DigitNum);\n  float ViewNumber = floor(ReadNum/CillDigit);\n  ViewNumber = fract(ViewNumber*0.1)*10.0;\n  NewUV.g = (NewUV.g * 0.1) + ViewNumber * 0.1;\n  vec4 MainTex = CCSampleWithAlphaSeparated(mainTexture, NewUV);\n  vec4 BoxTex = CCSampleWithAlphaSeparated(BoxTexture, uv);\n  BoxTex.r = pow(BoxTex.r , 5.0);\n  BoxTex.g = BoxTex.r;\n  BoxTex.b = BoxTex.r;\n  float ToFull = 0.0;\n  if(BoxTex.a>0.5 && BoxTex.a<0.505)\n  {\n    ToFull = 1.0*(1.0-MainTex.a*CillMask);\n  }\n  vec2 FullUV = clamp(((uv - 0.5)*LifeBoxSize) + 0.5 , 0.0, 1.0);\n  float MyLife = (MaxNum - ReadNum)/MaxNum;\n  float AniClip = 0.0;\n  if((1.0 - FullUV.g) - MyLife < 0.0)\n  {\n    AniClip = 1.0;\n  }\n  vec4 FullBoxColor = FullColor*AniClip;\n  vec4 FullBoxColorMask = FullBoxColor * vec4(ToFull,ToFull,ToFull,ToFull*0.25);\n  vec4 FinelColor = MainTex * vec4(MainTex.a, MainTex.a, MainTex.a, MainTex.a ) * vec4(CillMask, CillMask, CillMask, CillMask) +\n                    BoxTex * vec4(BoxTex.a, BoxTex.a, BoxTex.a, BoxTex.a) + FullBoxColorMask;\n  vec4 col = FinelColor * tintColor;\n  return CCFragOutput(col);\n}\nvoid main() { gl_FragColor = Num(); }"},"builtins":{"globals":{"blocks":[{"name":"CCGlobal","defines":[]},{"name":"CCCamera","defines":[]}],"samplerTextures":[],"buffers":[],"images":[]},"locals":{"blocks":[{"name":"CCLocal","defines":[]}],"samplerTextures":[],"buffers":[],"images":[]},"statistics":{"CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS":61,"CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS":51}},"defines":[{"name":"CC_USE_EMBEDDED_ALPHA","type":"boolean"}]}],[{"name":"Num","passes":[{"program":"MAT/UI/NumBox/MAT/particle_New_NumBoxTex02|vert:vs_main|Num-fs:Num","rasterizerState":{"cullMode":0},"blendState":{"targets":[{"blend":true,"blendSrc":2,"blendDst":1,"blendSrcAlpha":2,"blendDstAlpha":1}]},"depthStencilState":{"depthTest":true,"depthWrite":false},"properties":{"mainTexture":{"value":"white","type":28},"BoxTexture":{"value":"white","type":28},"mainTiling_Offset":{"type":16,"value":[1,1,0,0]},"tintColor":{"type":16,"value":[1,1,1,1]},"FullColor":{"type":16,"value":[0,1,0,1]},"NumBaseSize":{"type":13,"value":[1.5]},"MaxDigit":{"type":13,"value":[2]},"MaxNum":{"type":13,"value":[50]},"ReadNum":{"type":13,"value":[23]},"NumHeight":{"type":13,"value":[1.7]},"NumWidth":{"type":13,"value":[0.95]},"LifeBoxSize":{"type":13,"value":[1.2]}}},{"phase":"deferred-forward","propertyIndex":0,"program":"MAT/UI/NumBox/MAT/particle_New_NumBoxTex02|vert:vs_main|Num-fs:Num","rasterizerState":{"cullMode":0},"blendState":{"targets":[{"blend":true,"blendSrc":2,"blendDst":1,"blendSrcAlpha":2,"blendDstAlpha":1}]},"depthStencilState":{"depthTest":true,"depthWrite":false}}]},{"name":"Num-add","passes":[{"program":"MAT/UI/NumBox/MAT/particle_New_NumBoxTex02|vert:vs_main|Num-fs:Num","rasterizerState":{"cullMode":0},"blendState":{"targets":[{"blend":true,"blendSrc":1,"blendDst":4,"blendSrcAlpha":1,"blendDstAlpha":4}]},"depthStencilState":{"depthTest":true,"depthWrite":false},"properties":{"mainTexture":{"value":"white","type":28},"BoxTexture":{"value":"white","type":28},"mainTiling_Offset":{"type":16,"value":[1,1,0,0]},"tintColor":{"type":16,"value":[1,1,1,1]},"FullColor":{"type":16,"value":[0,1,0,1]},"NumBaseSize":{"type":13,"value":[1.5]},"MaxDigit":{"type":13,"value":[2]},"MaxNum":{"type":13,"value":[50]},"ReadNum":{"type":13,"value":[23]},"NumHeight":{"type":13,"value":[1.7]},"NumWidth":{"type":13,"value":[0.95]},"LifeBoxSize":{"type":13,"value":[1.2]}}},{"phase":"deferred-forward","propertyIndex":0,"program":"MAT/UI/NumBox/MAT/particle_New_NumBoxTex02|vert:vs_main|Num-fs:Num","rasterizerState":{"cullMode":0},"blendState":{"targets":[{"blend":true,"blendSrc":2,"blendDst":1,"blendSrcAlpha":2,"blendDstAlpha":1}]},"depthStencilState":{"depthTest":true,"depthWrite":false}}]}]]],0,0,[],[],[]]]]
